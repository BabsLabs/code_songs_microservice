require 'pry'

response = {
    "document_tone": {
        "tones": [
            {
                "score": 0.712461,
                "tone_id": "confident",
                "tone_name": "Confident"
            }
        ]
    },
    "sentences_tone": [
        {
            "sentence_id": 0,
            "text": "\"No clouds in my stones",
            "tones": []
        },
        {
            "sentence_id": 1,
            "text": "Let it rain, I hydroplane in the bank (eh, eh, eh)",
            "tones": []
        },
        {
            "sentence_id": 2,
            "text": "Coming down with the Dow Jones",
            "tones": []
        },
        {
            "sentence_id": 3,
            "text": "When the clouds come, we gone, we Roc-A-Fella (eh, eh, eh, eh)",
            "tones": []
        },
        {
            "sentence_id": 4,
            "text": "We fly higher than weather, in G5's or better",
            "tones": [
                {
                    "score": 0.540654,
                    "tone_id": "joy",
                    "tone_name": "Joy"
                },
                {
                    "score": 0.856622,
                    "tone_id": "tentative",
                    "tone_name": "Tentative"
                }
            ]
        },
        {
            "sentence_id": 5,
            "text": "You know me",
            "tones": [
                {
                    "score": 0.955445,
                    "tone_id": "analytical",
                    "tone_name": "Analytical"
                }
            ]
        },
        {
            "sentence_id": 6,
            "text": "In anticipation for precipitation stack chips for the rainy day (eh, eh, eh)",
            "tones": []
        },
        {
            "sentence_id": 7,
            "text": "Jay, Rain Man is back (eh, eh, eh)",
            "tones": []
        },
        {
            "sentence_id": 8,
            "text": "With little Ms. Sunshine, Rihanna, where you at?",
            "tones": [
                {
                    "score": 0.827103,
                    "tone_id": "joy",
                    "tone_name": "Joy"
                }
            ]
        },
        {
            "sentence_id": 9,
            "text": "",
            "tones": []
        },
        {
            "sentence_id": 10,
            "text": "You have my heart",
            "tones": []
        },
        {
            "sentence_id": 11,
            "text": "And we'll never be worlds apart",
            "tones": [
                {
                    "score": 0.80026,
                    "tone_id": "confident",
                    "tone_name": "Confident"
                }
            ]
        },
        {
            "sentence_id": 12,
            "text": "May be in magazines",
            "tones": [
                {
                    "score": 0.984352,
                    "tone_id": "tentative",
                    "tone_name": "Tentative"
                }
            ]
        },
        {
            "sentence_id": 13,
            "text": "But you'll still be my star",
            "tones": [
                {
                    "score": 0.620279,
                    "tone_id": "analytical",
                    "tone_name": "Analytical"
                }
            ]
        },
        {
            "sentence_id": 14,
            "text": "Baby, 'cause in the dark",
            "tones": [
                {
                    "score": 0.688855,
                    "tone_id": "fear",
                    "tone_name": "Fear"
                },
                {
                    "score": 0.907747,
                    "tone_id": "analytical",
                    "tone_name": "Analytical"
                }
            ]
        },
        {
            "sentence_id": 15,
            "text": "You can't see shiny cars",
            "tones": []
        },
        {
            "sentence_id": 16,
            "text": "And that's when you need me there",
            "tones": []
        },
        {
            "sentence_id": 17,
            "text": "With you I'll always share",
            "tones": [
                {
                    "score": 0.961633,
                    "tone_id": "confident",
                    "tone_name": "Confident"
                }
            ]
        },
        {
            "sentence_id": 18,
            "text": "",
            "tones": []
        },
        {
            "sentence_id": 19,
            "text": "Because",
            "tones": [
                {
                    "score": 0.997482,
                    "tone_id": "analytical",
                    "tone_name": "Analytical"
                }
            ]
        },
        {
            "sentence_id": 20,
            "text": "When the sun shine, we shine together",
            "tones": [
                {
                    "score": 0.765473,
                    "tone_id": "joy",
                    "tone_name": "Joy"
                }
            ]
        },
        {
            "sentence_id": 21,
            "text": "Told you I'll be here forever",
            "tones": [
                {
                    "score": 0.620114,
                    "tone_id": "sadness",
                    "tone_name": "Sadness"
                },
                {
                    "score": 0.942582,
                    "tone_id": "confident",
                    "tone_name": "Confident"
                }
            ]
        },
        {
            "sentence_id": 22,
            "text": "Said I'll always be your friend",
            "tones": [
                {
                    "score": 0.942582,
                    "tone_id": "confident",
                    "tone_name": "Confident"
                }
            ]
        },
        {
            "sentence_id": 23,
            "text": "Took an oath, I'mma stick it out to the end",
            "tones": [
                {
                    "score": 0.842108,
                    "tone_id": "analytical",
                    "tone_name": "Analytical"
                }
            ]
        },
        {
            "sentence_id": 24,
            "text": "Now that it's raining more than ever",
            "tones": [
                {
                    "score": 0.751512,
                    "tone_id": "confident",
                    "tone_name": "Confident"
                }
            ]
        },
        {
            "sentence_id": 25,
            "text": "Know that we'll still have each other",
            "tones": [
                {
                    "score": 0.801827,
                    "tone_id": "analytical",
                    "tone_name": "Analytical"
                }
            ]
        },
        {
            "sentence_id": 26,
            "text": "You can stand under my umbrella",
            "tones": []
        },
        {
            "sentence_id": 27,
            "text": "You can stand under my umbrella",
            "tones": []
        },
        {
            "sentence_id": 28,
            "text": "",
            "tones": []
        },
        {
            "sentence_id": 29,
            "text": "Ella, ella, eh, eh, eh",
            "tones": []
        },
        {
            "sentence_id": 30,
            "text": "Under my umbrella",
            "tones": []
        },
        {
            "sentence_id": 31,
            "text": "Ella, ella, eh, eh, eh\"",
            "tones": []
        }
    ]
}

tones_hash = {}

response[:sentences_tone].each do |sentences|
  sentences[:tones].each do |tone|
    unless tones_hash[tone[:tone_id].to_sym].nil?
      tones_hash[tone[:tone_id].to_sym] += tone[:score]
    else
      tones_hash[tone[:tone_id].to_sym] = tone[:score]
    end
  end
end

# with track_id or the track record, create sentiment record for
